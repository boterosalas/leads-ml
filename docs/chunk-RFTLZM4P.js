import{j as c}from"./chunk-SKMIOUKN.js";import{R as s,U as a,_ as n}from"./chunk-4RS3KPC3.js";var o={redirectUri:"https://boterosalas.github.io/leads-ml/",clientId:"8315944344732576",clientSecret:"rAsZB2GwlsivbGp4GE5CANWw0ulMTizu"};var p=class t{_httpClient=n(c);apiUrl="https://2o8i6bmmue.execute-api.us-east-1.amazonaws.com/MeliDevStage/trigger";token="";getCode(e){window.location.href=`https://auth.mercadolibre.com.co/authorization?response_type=code&client_id=${e}&redirect_uri=${o.redirectUri}`}getAccessToken(e){let{clientId:r,clientSecret:l}=JSON.parse(`${localStorage.getItem("keys")}`),m={method:"POST",url:"https://api.mercadolibre.com/oauth/token",data:{code:e,grant_type:"authorization_code",redirect_uri:o.redirectUri,client_id:r,client_secret:l},headers:{"Content-Type":"application/json"}};return this.useProxy(m).pipe(s(i=>{i&&(this.token=i.access_token,console.log(`token: ${this.token}`))}))}getMe(){let e={method:"GET",url:"https://api.mercadolibre.com/users/me",headers:{Authorization:`Bearer ${this.token}`}};return this.useProxy(e)}useProxy(e){return this._httpClient.post(this.apiUrl,e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};export{p as a};
