import{u as p}from"./chunk-KBZ5MVFZ.js";import{R as s,U as c,_ as a,o as n}from"./chunk-4RS3KPC3.js";var i={redirectUri:"https://boterosalas.github.io/leads-ml/",clientId:"8315944344732576",clientSecret:"rAsZB2GwlsivbGp4GE5CANWw0ulMTizu"};var m=class r{_proxy=a(p);getCode(e){window.location.href=`https://auth.mercadolibre.com.co/authorization?response_type=code&client_id=${e}&redirect_uri=${i.redirectUri}`}getAccessToken(e){let{clientId:t,clientSecret:o}=JSON.parse(`${localStorage.getItem("keys")}`),l={method:"POST",url:"https://api.mercadolibre.com/oauth/token",data:{code:e,grant_type:"authorization_code",redirect_uri:i.redirectUri,client_id:t,client_secret:o},headers:{"Content-Type":"application/json"}};return this._proxy.useProxy(l).pipe(s(d=>{console.log("token from getAccessToken",d)}))}getMe(){let e=localStorage.getItem("token");if(e){let{access_token:t}=JSON.parse(e),o={method:"GET",url:"https://api.mercadolibre.com/users/me",headers:{Authorization:`Bearer ${t}`}};return this._proxy.useProxy(o)}return n(()=>new Error("No token provided"))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{m as a};
