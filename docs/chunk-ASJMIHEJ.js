import{j as n}from"./chunk-SKMIOUKN.js";import{R as i,U as s,_ as a}from"./chunk-4RS3KPC3.js";var o={redirectUri:"https://boterosalas.github.io/leads-ml/",clientId:"8315944344732576",clientSecret:"rAsZB2GwlsivbGp4GE5CANWw0ulMTizu"};var c=class r{_httpClient=a(n);apiUrl="https://2o8i6bmmue.execute-api.us-east-1.amazonaws.com/MeliDevStage/trigger";getCode(e){window.location.href=`https://auth.mercadolibre.com.co/authorization?response_type=code&client_id=${e}&redirect_uri=${o.redirectUri}`}getAccessToken(e){let{clientId:t,clientSecret:p}=JSON.parse(`${localStorage.getItem("keys")}`),l={method:"POST",url:"https://api.mercadolibre.com/oauth/token",data:{code:e,grant_type:"authorization_code",redirect_uri:o.redirectUri,client_id:t,client_secret:p},headers:{"Content-Type":"application/json"}};return this.useProxy(l).pipe(i(m=>{console.log("token from getAccessToken",m)}))}getMe(){let{access_token:e}=JSON.parse(`${localStorage.getItem("token")}`),t={method:"GET",url:"https://api.mercadolibre.com/users/me",headers:{Authorization:`Bearer ${e}`}};return this.useProxy(t)}useProxy(e){return this._httpClient.post(this.apiUrl,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})};export{c as a};
