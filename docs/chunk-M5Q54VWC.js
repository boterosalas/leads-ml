import{b as y,c as C,g as _,k as A,m as S,o as w}from"./chunk-RUVWZTAA.js";import{Da as m,Ea as p,Ga as b,Ha as u,L as a,M as f,Q as h,R as r,va as v,wa as g}from"./chunk-MIIJGJFC.js";var i=class{};var n=class o{constructor(t){this._authGatewayService=t}getCode(t){return this._authGatewayService.getCode(t)}getToken(t){return this._authGatewayService.getToken(t)}static \u0275fac=function(e){return new(e||o)(h(i))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};var s=class o{_authUsecaseService=r(n);_activatedRoute=r(A);_router=r(S);_location=r(y);ngOnInit(){this.listenToCode()}getCode(){this._authUsecaseService.getCode("8315944344732576")}listenToCode(){this._activatedRoute.queryParams.subscribe(t=>{let e=t.code||null;e&&(this.reInitUrl,this.getToken(e))})}getToken(t){this._authUsecaseService.getToken(t).subscribe(e=>{console.log({data:e})})}reInitUrl(){this._location.replaceState(this._router.url.split("?")[0])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=v({type:o,selectors:[["app-auth"]],decls:4,vars:0,consts:[[3,"click"]],template:function(e,T){e&1&&(m(0,"h1"),u(1,"Auth"),p(),m(2,"button",0),b("click",function(){return T.getCode()}),u(3,"Login"),p())},encapsulation:2})};var I=[{path:"",component:s}];var d={redirectUri:"https://boterosalas.github.io/leads-ml/"};var c=class o{_httpClient=r(_);getCode(t="8315944344732576"){window.location.href=`https://auth.mercadolibre.com.co/authorization?response_type=code&client_id=${t}&redirect_uri=${d.redirectUri}`}getToken(t){let e={code:t,grant_type:"authorization_code",redirect_uri:d.redirectUri,client_id:"8315944344732576",client_secret:"rAsZB2GwlsivbGp4GE5CANWw0ulMTizu"};return this._httpClient.post("",e)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};var k=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=g({type:o});static \u0275inj=f({providers:[n,{provide:i,useClass:c}],imports:[C,w.forChild(I)]})};export{k as AuthModule};
